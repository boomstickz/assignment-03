<%- include("./partials/header.ejs") %>

<h2>Edit Dashboard</h2>

<form action="/dashboards/edit/<%= dash._id %>" method="POST" enctype="multipart/form-data">

  <!-- Title -->
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input type="text" name="title" value="<%= dash.title %>" class="form-control">
  </div>

  <!-- Description -->
  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea name="description" class="form-control" rows="5"><%= dash.description %></textarea>
  </div>

  <!-- Existing Images -->
  <h4>Current Images</h4>
  <div class="row mb-3">
    <% dash.images.forEach((img, index) => { %>
      <div class="col-md-3 mb-3 text-center">

        <img src="/uploads/<%= img %>" class="img-fluid rounded mb-2">

        <!-- REMOVE BUTTON -->
        <form action="/dashboards/<%= dash._id %>/remove-image" method="POST">
          <input type="hidden" name="imageName" value="<%= img %>">
          <button class="btn btn-sm btn-danger">Remove</button>
        </form>

      </div>
    <% }) %>
  </div>


  <!-- Add new images -->
  <label class="form-label">Upload New Images:</label>
  <input type="file" name="images" multiple class="form-control mb-3">

  <!-- Tags -->
  <label class="form-label">Tags (comma separated):</label>
  <input type="text" name="tags"
         value="<%= dash.tags.join(', ') %>"
         class="form-control mb-3">

  <!-- Abilities -->
  <label class="form-label">Abilities (comma separated):</label>
  <input type="text" name="abilities"
         value="<%= dash.abilities.join(', ') %>"
         class="form-control mb-3">

  <!-- Colors -->
  <label class="form-label">Colors (comma separated):</label>
  <input type="text" name="colors"
         value="<%= dash.colors.join(', ') %>"
         class="form-control mb-3">

  <button class="btn btn-primary">Save Changes</button>
</form>

<%- include("./partials/footer.ejs") %>
